<!DOCTYPE html>
<html lang="en">
	<head>
	<link rel="icon" type="image/png" href="logoUsthb.png" />
		<meta charset="utf-8">
		<title> Enseignant</title>
		<script type="text/javascript" src="https://ff.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=k9lRd1wO971VotxsA-ZTlUQ9WuxTLCcM5FU_ar6FZHat7GyJhRyjPPWX38Gk_Yal_himjidxONscg08I3V39butK9HaIrmwOJDDq0FyflMAYXVjzLi0VBRgupmWO3Lz2lUsnzVzVI4DbdA7kTZaW5h11k2bWXXd1eOOFXJP7HdE3EucyZ9-CtgsyOkBueWxMKSTxkoEStiki1Pl0qCtuwPlc5hu5K6L5VwMdvQGBohBDivAWaj3Et-jKo53qFwZVjR7FyBC9EQFPjCBd7es5AMNSBsKGnxOyZJSsUofvSp9Z_3i1B_m_9S060WTCEchjvi7LT1gzq2vXjeMaS9M1UF0JqED-NOWF92O5J6FYVXjBd1oFGxaSjOkM0uhUyo1q_n5XQ_VIEvX7sldVKRlyVGlU2A5mevUoShOddXxT8L3So68ZlUg1u1EGahiEh0Hb-Yz0LaD2Zne1_eQDQ0_OKnu1w1bjzo3JvcZ4wsaqhEIqvrEA-KGg8OSpJdwL8KXzaktReH4RuOCzavxyjfB0bsufCemyzOqPS_p-hfd3fpKClCUU8qdPhnvI1-zleuWdyEjEjWOVaJTrWBsrWZTGhfJ__jNuJNJABKxYmseeZKc70ooxZdMHakPJPEMWH2fjLfh76tPDxsLvsd903o6DuvvY3m5Dnn1PgjP6RLvveBltgGxVAMleJ5qe-_TKeZwuK17NUaZuEKVCiUTfZeeZzcs9ovTjBwZDqs3wWF7DF-JcBF_slwKYhdQ1txK3_GqK99cJdykKHwFXVmszltSS3hwOmkg2q6zNKhvgZvbt5FKfAbxAsyzTV6jyFZs12d8ktr4fBDF8kxuSIjSgjHHFD6EP4ZSpbLWAr8nyN0UHqS1iMkJxiES73DVWRzoWJpdsrRFibdYVWfP5mEZPwe9jCJhtmRa8a-4cvELTlCiPBl1ZfWTI7ouAqWuvYsHj4BjMDKXq0nlIrIT8nR9hY36NX6WBSWf8F_PJAyiSDdQYFj5Z4uKVuK0v9NKylgTERI7wrBVE8_OReb26bG2t8CC4INtK3Al1cBDEq8r5T8deIiUNKNWE9AIZX5b5pRb8GOyXttY8cLlYg-vDAqspa_e1DvyZ35lnzawjzzs6Mz2dgBkwiLLgkHvHLLSUMML9N8olLTRTfbFGBm4AsXmryikHSgqfJMyEKesmbD-o9Rp92bU4zyLzsJ8Hr5cGhxlGkWWHYqScQtxf9Nd7sLcfCxmmH4M9ED-0mOGJt9Q8g_gkYY8jfDT6Sj_kFQSKS_38NtAT0UdrtCBbcQpu3kRYuzBn5cCjlWH5uezj2azdhq4o2-Pciqz9G_vczV75Z1SJUcIv0sVGCKaspiNYghz728Rke9Eq8oKjMcZwRFQ0djqsy0LcVIqnlKIwcRxtGuuYOB0RvcZ0VY8QeFd0mIWjKgjw6VqrLCA3PWP4FcY80QDCDbT8crEJqAezs8jfOOQz6pbvOu6qP735-tLO2VM_ci_aaXcUng40ZSjvrJgKRRPQJ5iWbUIREw7YCquJPm29_BIT9HTaFEUepBFMBhqkeYNBgzXD0baFBvTO14yrlnUTw0M" nonce="715ac1aff957b1898c04a7d27e1fa89d" charset="UTF-8"></script><script type="text/javascript" src="d3.v3.js"></script>
		<style>
		
		
		html, body {
				width: 100%;
				height:100%;
			  }

			div{
				margin:20px;
				margin-left: 30px;
			}  
			p{
				margin:10px;
				margin-left: 20px;
			}

			svg{
				position: absolute;
			    width : 45%;
				right : 5%;

			}  
			 
			  body {
				  background: #ececec;
				  background-size: 400% 400%;
				  font-family: verdana;
			      font-size: 24px;
				  color:black;
			  }
			  
			 
			.container {
				position: absolute;
				top: 10%;
			  }
			  .button {
				border: none;
				display: block;
				text-align: center;
				cursor: pointer;
				text-transform: uppercase;
				outline: none;
				overflow: hidden;
				position: relative;
				color: #eeeeee;
				font-weight: 600;
				font-size: 15px;
				background-color: #142d4c;
				padding: 15px 50px;
				margin: 0 auto;
				border-radius: 10px;      
			  }
			  .button span {
				position: relative;
				z-index: 1;
			  }
			  .button:after {
				content: "";
				position: absolute;
				left: 0;
				top: 0;
				height: 470%;
				width: 140%;
				background: #385170;
				-webkit-transition: all 0.5s ease-in-out;
				transition: all 0.5s ease-in-out;
				-webkit-transform: translateX(-100%) translateY(-25%) rotate(45deg);
				transform: translateX(-100%) translateY(-25%) rotate(45deg);
			  }
			  .button:hover:after {
				-webkit-transform: translateX(-9%) translateY(-25%) rotate(45deg);
				transform: translateX(-9%) translateY(-25%) rotate(45deg);
			  }
			
				
			div.tooltip {   
				position: absolute;         
				text-align: center;         
				width: 80px;                    
				height: 28px;                   
				padding: 2px;               
				font: 12px sans-serif;      
				background: lightsteelblue; 
				border: 0px;        
				border-radius: 10px;         
				pointer-events: none;           
			}

		.cl1{
		fill:white;
		stroke: black;
		color: cornflowerblue;
		}

		pathh {
			fill: #3182bd;
		  }
		  
		  text {
			font-family: verdana;
			font-size: 24px;
		  }
		 select{
			font-family: verdana;
			font-size: 20px;
			background-color: whitesmoke;
			color: black;
			border-radius: 10px;
		 }
		 input{
			font-family: verdana;
			font-size: 20px;
			background-color: whitesmoke;
			color: black;
			border-radius: 10px;
		 }
		 h1 {
			
			font-family: verdana;
			font-size: 120%;
			text-align-last: center;
			color: aliceblue;
			background-color: #385170;
			border-radius: 10px;
			padding: 20px;
		  }

		  table {
			border-collapse: collapse;
			width : 80%;
			color : #eb4034;
			font-family : monospace;
			font-size : 25px;
			text-align : left;
	
	
		}
		th{
			background-color : #eb4034;
			color:white;
		}
		tr:nth-child(even){background-color:#ededed}

		 button#chercher.button{
            position: center;
			

		}
		input, select{
			background-color: #9fd3c7;
			padding: 10px;
		}
		#fin{
			border-style: outset;
			margin: 2cm;
			border-radius: 5px;
			border-width: 0.2cm;
		}
		  table {
        border-collapse: collapse;
        width : 80%;
        color : black;
        font-family : monospace;
        font-size : 25px;
        text-align : left;


    }
    th{
        background-color : #eb4034;
        color:white;
    }
    tr:nth-child(even){background-color:white;}
	
          
    
		</style>
		
	</head>
	<body>
	<h1>Université des Sciences et de la Technologie Houari Boumediene</h1>
	    <br>
		<br>
		<br/>
		<center><img src="prof.png" alt="prof" style="width: 40px; height:40px;">  Spécial pour les enseignants :</center> <br><br>
		<center>
		<div>
			Nom : <input type="text" id="NomPRf" />
			jour :
			<select name="jour" id="jour">
			    <option value="defaut">Jour</option>
				<option value="Dimanche">Dimanche</option>
				<option value="Lundi">Lundi</option>
				<option value="Mardi">Mardi</option>
				<option value="Mercredi">Mercredi</option>
				<option value="Jeudi">Jeudi</option>
			  </select>
			heure : <select name="heure" id="heure">
			    <option value="defaut">Heure</option>
				<option value="8h">8h</option>
				<option value="9h40">9h40</option>
				<option value="11h20">11h20</option>
				<option value="13h">13h</option>
				<option value="14h30">14h30</option>
			  </select>

		</div>
		<br>
		<div>
        	
			<button id="chercher"class="button"><span>Chercher</span></button>
        	<br><br>
		</center>
        </div>
		<center>
		<table id="table">
        <tr>
            <th>Module</th>
			<th>Type</th>
            <th>Prof </th>
            <th>Salle </th>
            <th>Jour </th>
            <th>Heure</th>
			<th>Section</th>
			<th>Groupe</th>
        </tr>
		</table>
		</center>
		
		<script type="text/javascript">
			//const introTable = document.getElementById("table");
			//let contenu = introTable.innerHTML;
			
			//introTable.innerHTML += "<tr><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>1</td></tr>";
            //introTable.innerHTML += "<tr><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>AAAAAAA</td><td>1</td></tr>";
			

    
			/*
			function gBox(nbCheck){
				if(document.getElementById(nbCheck).checked == true){
					alert(nbCheck+" cochée");
					map.enter()
					  .append("path")
					   .attr("d", path)
					   .attr("fill", (d, i) => { if(d.properties.NOM =="TP.132"){return "red";}return "white"; })
					   .attr("stroke","black" )
					   .attr("stroke-width" , 2); 
				}
				else{
					alert('Checkbox non coché !');
				}
			}  ;
			*/
            
			
			//Width and height
			var w = 800;
			var h = 600;

			//Define map projection
			var proj = d3.geo.mercator()
								   .translate([0,0])
								   .scale([1]);

			//Define path generator
			var path = d3.geo.path()
							 .projection(proj);
							 
			
			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h)
						.attr("transform", "rotate(-45)");
d3.csv("edt.csv", function(data){
		d3.json("Index/faculte_info.geojson", function(json) {
            var b = path.bounds(json);
            console.log(b);
               s = .99 / Math.max( (b[1][0] - b[0][0]) / w , (b[1][1] - b[0][1]) / h ); 
               t = [ (w - s * (b[1][0] +b[0][0])) / 2 , (h - s * (b[1][1]+b[0][1])) / 2 ];
               console.log(s,t);
            proj.translate(t).scale(s);

					

					var map = svg.selectAll("path")
								 .data(json.features)
								 ;             
             		
					map.enter()
					   .append("path")
					   .attr("d", path)
					   .attr("class","cl1");
					   
			        var salle="";
					   
             		map.enter()
					  .append("path")
					   .attr("d", path)
					   .attr("fill", (d, i) => { 
						if(d.properties.NOM =="")
						{
							return "darkslategray";
						}else{
							if(d.properties.NOM =="Faculté d'Informatique")
							{
								return "cornflowerblue";
							}
						}	
						
					
						return "white"; 
					   })
					   .attr("stroke","black" )
					   .attr("stroke-width" , 2); 

                       svg.attr("display","none");

                    //Bouton Chercher
					var profV=0;
                    document.getElementById('chercher').onclick = function() 
					{
						var name = document.getElementById('NomPRf');
						var jour = document.getElementById('jour');
						var heure = document.getElementById('heure');
						console.log("CHERCHER = "+name.value+" "+jour.value+" "+heure.value);
						var yyy=0;
                        
                        if(name.value != "")
						{
						 
						map.enter()
					  			.append("path")
					   			.attr("d", path)
					   			.attr("fill", (d, i) => {
									const introTable = document.getElementById("table");
									let contenu = introTable.innerHTML;
									


									
                                if(jour.options[jour.selectedIndex].text == "Jour" && heure.options[heure.selectedIndex].text == "Heure")
								{
									if(yyy==0){
									for(i =0;i<data.length;i++)
									{
									  if(data[i]["prof"].toUpperCase() == name.value.toUpperCase() )
									  {
										profV=1;
										//console.log("jr hr non sel");
										introTable.innerHTML += "<tr><td>"+data[i]["module"]+"</td><td>"+data[i]["type"]+"</td><td>"+name.value+"</td><td>"+data[i]["salle"]+"</td><td>"+data[i]["jour"]+"</td><td>"+data[i]["heure"]+"</td><td>"+data[i]["specialite"]+"</td><td>"+data[i]["grp"]+"</td></tr>";
                                        yyy=1;

									  }	
							   		}
								}else{
									
									return 0;}	  
								}
								else
								{
								if(jour.options[jour.selectedIndex].text != "Jour" && heure.options[heure.selectedIndex].text != "Heure"){
									if(yyy == 0){
									for(i =0;i<data.length;i++)
									{
									  if(data[i]["prof"].toUpperCase() == name.value.toUpperCase() && jour.options[jour.selectedIndex].text == data[i]["jour"] && heure.options[heure.selectedIndex].text == data[i]["heure"])
									  {
										profV=1;
										var m =data[i]["module"];
										var t = data[i]["type"];
										var n=name.value.toUpperCase();
										var s= data[i]["salle"];
										var j =data[i]["jour"];
										var h = data[i]["heure"];
										var ss = data[i]["specialite"];
										var g = data[i]["grp"];


										//console.log("jr hr non sel");
										introTable.innerHTML += "<tr><td>"+data[i]["module"]+"</td><td>"+data[i]["type"]+"</td><td>"+name.value.toUpperCase()+"</td><td>"+data[i]["salle"]+"</td><td>"+data[i]["jour"]+"</td><td>"+data[i]["heure"]+"</td><td>"+data[i]["specialite"]+"</td><td>"+data[i]["grp"]+"</td></tr>";
                                        yyy = 1;
									  }	
									  
							   		}
								}else{
									
									return 0;}
									
								}
								else{
									if(jour.options[jour.selectedIndex].text != "Jour" && heure.options[heure.selectedIndex].text == "Heure"){
									if(yyy == 0){
									for(i =0;i<data.length;i++)
									{
									  if(data[i]["prof"] == name.value && jour.options[jour.selectedIndex].text == data[i]["jour"])
									  {
										profV=1;
										var m =data[i]["module"];
										var t = data[i]["type"];
										var n=name.value;
										var s= data[i]["salle"];
										var j =data[i]["jour"];
										var h = data[i]["heure"];
										var ss = data[i]["specialite"];
										var g = data[i]["grp"];


										//console.log("jr hr non sel");
										introTable.innerHTML += "<tr><td>"+data[i]["module"]+"</td><td>"+data[i]["type"]+"</td><td>"+name.value+"</td><td>"+data[i]["salle"]+"</td><td>"+data[i]["jour"]+"</td><td>"+data[i]["heure"]+"</td><td>"+data[i]["specialite"]+"</td><td>"+data[i]["grp"]+"</td></tr>";
                                        yyy = 1;
									  }	
									  
							   		}
								}else{
									
									return 0;}
									
								}
                                

								}}
									
									
								});

								//introTable.innerHTML += "<tr><td>"+m+"</td><td>"+t+"</td><td>"+n+"</td><td>"+s+"</td><td>"+j+"</td><td>"+h+"</td><td>"+ss+"</td><td>"+g+"</td></tr>";


							}else{
								console.log("Prof introuvable");
								alert("Veuillez introduire le nom de l'enseignant ");
							}	
							
							

					}






					   //Bouton visualiser
					document.getElementById('submit').onclick = function() {
						var radios = document.getElementsByName('tpInf');
						var name = document.getElementById('NomPRf');
						var day = document.getElementById('jour');
						var Daytext = day.options[day.selectedIndex].text;
						console.log("test ="+Daytext);
						var h= document.getElementById('heure');
						var saveSalle = null;
						var k = 0;
						var l = 0;
						var existe = 0;
						map.enter()
					  			.append("path")
					   			.attr("d", path)
					   			.attr("fill", (d, i) => {

									for(i =0;i<data.length;i++){
										console.log("val = "+name.value);
										if(data[i]["heure"]== h.options[h.selectedIndex].text && data[i]["prof"] == name.value && data[i]["jour"] == Daytext ){
											existe = 1;
											k = k+1;
											saveSalle = data[i]["salle"];
											
											break;
										}
									}
									if(k == 1){
										if(existe == 1){
											alert(name.value+" est dans la salle : "+saveSalle+" le : "+day.value);
											k=2;
											l=1;
										}
										
									}else{
										if (l==0){
											alert(name.value+" n'est pas dans la salle : "+saveSalle+" le : "+day.value);
											l=l+1;
										}
									}
									console.log("salle 5 = "+saveSalle)
									if(d.properties.NOM == saveSalle && existe == 1){
										console.log("rrr");
										saveSalle ="";
										return "purple";
									}
									else{
										if(d.properties.NOM =="")
										{
											return "darkslategray";
										}else{
											if(d.properties.NOM =="Faculté d'Informatique")
											{
												return "cornflowerblue";
											}
										}

									}
									return "white";



								}).attr("stroke","black" )
								.attr("stroke-width" , 2);

								k=0;l=0;

								
						/*for (var radio of radios)
						{
							if (radio.checked) {
								alert(radio.value+" est selectionée");
							    salle =  radio.value;
								map.enter()
					  			.append("path")
					   			.attr("d", path)
					   			.attr("fill", (d, i) => 
								{ 
									var existe = 0;	
									if(d.properties.NOM ==salle)
						  			{ 
										for(i =0;i<data.length;i++){
											console.log("val = "+name.value);
											if(data[i]["salle"]== salle && data[i]["prof"] == name.value && data[i]["jour"] == day.value ){
												existe = 1;
												
												break;
											}
										}

										if(existe ==1){
											alert(name.value+" est dans la salle : "+salle+" le : "+day.value);
										}else{
											alert(name.value+" n'est pas dans la salle : "+salle+" le : "+day.value);
										}

										return "red";
						 		 	}
									else{
										if(d.properties.NOM =="")
										{
											return "darkslategray";
										}else{
											if(d.properties.NOM =="Faculté d'Informatique")
											{
												return "cornflowerblue";
											}
										}
									}
									
									return "white"; 
					   			})
					   			.attr("stroke","black" )
					   			.attr("stroke-width" , 2); 

								   
								
							}
								
						}*/
					}
					   
					   
					   
					   
			 //Les nom des salles
			 svg.selectAll("text")
			 .data(json.features)
			 .enter()
			 .append("text")
			 .style("font", "10px times")
			 .attr("fill", "black")
			 .attr("transform", (d) => {console.log(path.centroid(d)); return "translate(" + path.centroid(d) + ")translate(-14,5)rotate(20)"; })
			 .attr("text-anchor", "begin")
			 .text((d) => {
				 console.log(d.properties.NOM);
				 return d.properties.NOM;
			 });

		 /*
		 function mouseDown() {
			 console.log("mouseDown");
			 square = svg.append("rect")
			 .attr("height", 100)
			 .attr("width", 100)
			 .attr("x", 10)
			 .attr("y", 10)
			 .attr("fill", "red");
		 }
		 
		 function mouseUp() {
			 console.log("mouseUp");
			 square = svg.append("rect")
			 .attr("height", 100)
			 .attr("width", 100)
			 .attr("x", 10)
			 .attr("y", 10)
			 .attr("fill", "blue");
		 }
		 */


		 document.getElementById('effacer').onclick = mouseClick;
		 function mouseClick() {
			 console.log("mouseClick");
			 //svg.remove();
			 svg.attr("display","none");

		 }
		 document.getElementById('afficher').onclick = mouseClick2;
		 function mouseClick2() {
			 console.log("mouseClick2");
			 //svg.remove();
			 svg.attr("display","block");

		 }

			
			 
			 
			 
			 
				});
			
			});

			
		</script>
		
	</body>
</html>